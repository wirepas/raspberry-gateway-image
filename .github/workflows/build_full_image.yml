# This is a workflow to build image with pi-gen tool

name: Build Full Rpi image from scratch

on:
  pull_request:
  
  workflow_dispatch:

jobs:
  build_image:
    runs-on: ubuntu-latest
    container:
      image: ubuntu/ubuntu:xenial

    steps:
      - name: checkout our repo
        uses: actions/checkout@v2
        
      - name: checkout pi-gen
        uses: actions/checkout@v2
        with:
          repository: 'RPi-Distro/pi-gen'
          ref: '2021-05-07-raspbian-buster'
          path: 'pi-gen'
             
      - name: Nothing yet
        run: ls
        
      - name: install required package
        run: |
            sudo apt-get install coreutils quilt parted qemu-user-static debootstrap zerofree zip \
                 dosfstools bsdtar libcap2-bin grep rsync xz-utils file git curl bc \
                 qemu-utils kpartx
